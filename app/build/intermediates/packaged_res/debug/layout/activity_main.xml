<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_color"
    tools:context=".MainActivity">

    <!-- Top Header Status Bar Placeholder (Optional) -->

    <!-- SETUP LAYOUT (Visible when NOT locked) -->
    <androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/setupLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <!-- Header -->
        <TextView
            android:id="@+id/tvFocusLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="48dp"
            android:text="Focus on what matters"
            android:textColor="@color/orange_accent"
            android:textSize="14sp"
            android:letterSpacing="0.05"
            android:fontFamily="sans-serif-medium"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <TextView
            android:id="@+id/tvTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp"
            android:gravity="center"
            android:text="Blocks Phone Usage\nCompletely"
            android:textColor="@color/white"
            android:textSize="24sp"
            android:textStyle="bold"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toBottomOf="@id/tvFocusLabel" />

        <!-- Existing Date and Stats hidden or moved? Let's keep them small top left if needed, 
             but for now let's prioritize the clean UI. 
             The user code had complex date/stats header. 
             I will move the stats to a more subtle location or keep them if they are critical. 
             The screenshot didn't show them. I'll comment them out for now to match the "clean" request, 
             or maybe put them in the corner. 
             Actually, let's keep the premium button but move it to top right. -->

        <TextView
            android:id="@+id/btnPremium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="PRO"
            android:textColor="@color/white"
            android:paddingHorizontal="12dp"
            android:paddingVertical="6dp"
            android:background="@drawable/bg_button_gradient"
            android:textStyle="bold"
            android:textSize="10sp"
            android:layout_marginTop="24dp"
            android:layout_marginEnd="24dp"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <!-- Segmented Control -->
        <LinearLayout
            android:id="@+id/segmentedControl"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginHorizontal="24dp"
            android:layout_marginTop="32dp"
            android:background="@drawable/bg_segment_container"
            android:orientation="horizontal"
            android:padding="4dp"
            app:layout_constraintTop_toBottomOf="@id/tvTitle">

            <TextView
                android:id="@+id/btnTabPhone"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:text="Phone Lock"
                android:textColor="@color/white"
                android:textSize="14sp"
                android:fontFamily="sans-serif-medium"
                android:background="@drawable/bg_segment_selected" />

            <TextView
                android:id="@+id/btnTabApp"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:gravity="center"
                android:text="App Block"
                android:textColor="@color/gray_text"
                android:textSize="14sp"
                android:fontFamily="sans-serif-medium"
                android:background="@null" />
        </LinearLayout>

        <!-- Timer Section -->
        <LinearLayout
            android:id="@+id/timerSection"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:orientation="vertical"
            android:gravity="center"
            app:layout_constraintTop_toBottomOf="@id/segmentedControl"
            app:layout_constraintBottom_toTopOf="@id/btnStartContainer">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Set Duration"
                android:textColor="@color/gray_text"
                android:textSize="14sp"
                android:layout_marginBottom="24dp" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center">

                <NumberPicker
                    android:id="@+id/npHour"
                    android:layout_width="80dp"
                    android:layout_height="180dp"
                    android:theme="@android:style/Theme.Holo" 
                    android:solidColor="@color/white" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text=":"
                    android:textColor="@color/white"
                    android:textSize="32sp"
                    android:layout_marginHorizontal="16dp"
                    android:textStyle="bold" />

                <NumberPicker
                    android:id="@+id/npMinute"
                    android:layout_width="80dp"
                    android:layout_height="180dp" />

            </LinearLayout>
            
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Try Lock >"
                android:textColor="@color/gray_text"
                android:textSize="14sp"
                android:layout_marginTop="32dp" />

        </LinearLayout>
        
        <!-- App List (Hidden by default, shown when App tab selected) -->
        <LinearLayout
            android:id="@+id/appListContainer"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:orientation="vertical"
            android:visibility="gone"
            app:layout_constraintTop_toBottomOf="@id/segmentedControl"
            app:layout_constraintBottom_toTopOf="@id/btnStartContainer">

            <!-- Selected Apps Summary -->
            <TextView
                android:id="@+id/tvSelectedApps"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="8dp"
                android:layout_marginStart="16dp"
                android:layout_marginEnd="16dp"
                android:layout_marginBottom="8dp"
                android:textColor="@color/orange_accent"
                android:textSize="14sp"
                android:textStyle="bold"
                android:visibility="visible"
                android:text="Selected: Phone, Messages" />

            <EditText
                android:id="@+id/etSearch"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:layout_marginHorizontal="16dp"
                android:layout_marginBottom="8dp"
                android:background="@drawable/bg_segment_container"
                android:paddingHorizontal="16dp"
                android:drawableStart="@android:drawable/ic_menu_search"
                android:drawableTint="@color/gray_text"
                android:drawablePadding="12dp"
                android:hint="Search apps to allow..."
                android:textColor="@color/white"
                android:textColorHint="@color/gray_text"
                android:maxLines="1"
                android:inputType="text"
                android:imeOptions="actionDone" />

            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/rvApps"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:padding="16dp" />
        </LinearLayout>


        <!-- Bottom Action Button -->
        <LinearLayout
            android:id="@+id/btnStartContainer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="24dp"
            android:orientation="vertical"
            app:layout_constraintBottom_toTopOf="@id/bottomNav">
            
            <androidx.appcompat.widget.AppCompatButton
                android:id="@+id/btnStart"
                android:layout_width="match_parent"
                android:layout_height="60dp"
                android:background="@drawable/bg_button_primary"
                android:text="Start Focus"
                android:textAllCaps="false"
                android:textColor="@color/white"
                android:textSize="18sp"
                android:textStyle="bold" />
                
             <!-- Ad Frame Placeholder matches User's logic -->
             <FrameLayout
                android:id="@+id/ad_frame"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="8dp" 
                android:minHeight="50dp"/>

        </LinearLayout>

        <!-- Bottom Navigation (Visual Only for now) -->
        <LinearLayout
            android:id="@+id/bottomNav"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingVertical="16dp"
            android:background="@color/black"
            app:layout_constraintBottom_toBottomOf="parent">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                 android:text="Lock"
                 android:textColor="@color/orange_accent"
                 android:textSize="12sp"
                 android:drawableTop="@android:drawable/ic_lock_lock" 
                 android:drawableTint="@color/orange_accent"/>
            
                 <TextView
                     android:id="@+id/btnTabSchedule"
                     android:layout_width="0dp"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:gravity="center"
                     android:text="Schedule"
                     android:textColor="@color/gray_text"
                     android:textSize="12sp"
                     android:drawableTop="@android:drawable/ic_menu_my_calendar"
                     android:drawableTint="@color/gray_text"/>
    <!-- Lock History Display for Schedule Tab -->
    <TextView
        android:id="@+id/tvScheduleHistory"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:textColor="@color/orange_accent"
        android:textSize="16sp"
        android:gravity="center"
        android:background="@drawable/bg_segment_container"
        android:visibility="gone"
        app:layout_constraintTop_toBottomOf="@id/segmentedControl"
        app:layout_constraintBottom_toTopOf="@id/btnStartContainer"/>

             <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                 android:text="Dumbphone"
                 android:textColor="@color/gray_text"
                 android:textSize="12sp"
                 android:drawableTop="@android:drawable/ic_menu_call" 
                 android:drawableTint="@color/gray_text"/>
            
             <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                 android:text="Settings"
                 android:textColor="@color/gray_text"
                 android:textSize="12sp"
                 android:drawableTop="@android:drawable/ic_menu_preferences" 
                 android:drawableTint="@color/gray_text"/>

        </LinearLayout>

    </androidx.constraintlayout.widget.ConstraintLayout>



    <!-- LOCKED LAYOUT (Visible when locked) -->
    <androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/lockedLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="24dp"
        android:visibility="gone"
        android:background="@color/background_color">

        <!-- Timer Circle Container -->
        <FrameLayout
            android:id="@+id/timerContainer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toTopOf="@id/dockContainer"
            android:layout_marginTop="-50dp">

            <com.google.android.material.progressindicator.CircularProgressIndicator
                android:id="@+id/progressTimer"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:progress="75"
                app:indicatorSize="260dp"
                app:trackThickness="8dp"
                app:trackColor="#333333"
                app:indicatorColor="@color/orange_accent"
                android:max="1000" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:gravity="center"
                android:layout_gravity="center">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Left time"
                    android:textColor="@color/gray_text"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/tvTimer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="00:09:48"
                    android:textSize="40sp"
                    android:textStyle="bold"
                    android:textColor="@color/white"
                    android:fontFamily="sans-serif-medium" />
            </LinearLayout>
        </FrameLayout>

        <TextView
            android:id="@+id/tvEndTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="End Time"
            android:textColor="@color/gray_text"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintBottom_toTopOf="@id/dockContainer"
            android:layout_marginBottom="48dp" />

        <TextView
            android:id="@+id/tvEndTimeValue"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="12:00 pm"
            android:textColor="@color/white"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintBottom_toTopOf="@id/dockContainer"
            android:layout_marginBottom="48dp" />


        <!-- Bottom Dock -->
        <LinearLayout
            android:id="@+id/dockContainer"
            android:layout_width="match_parent"
            android:layout_height="80dp"
            android:background="@drawable/bg_segment_container"
            android:orientation="horizontal"
            android:gravity="center"
            android:padding="16dp"
            app:layout_constraintBottom_toBottomOf="parent">

            <ImageView
                android:id="@+id/dockPhone"
                android:layout_width="0dp"
                android:layout_height="32dp"
                android:layout_weight="1"
                android:src="@android:drawable/ic_menu_call"
                app:tint="@color/white" />

            <ImageView
                android:id="@+id/dockMessage"
                android:layout_width="0dp"
                android:layout_height="32dp"
                android:layout_weight="1"
                android:src="@android:drawable/sym_action_chat"
                app:tint="@color/white" />

            <ImageView
                android:id="@+id/dockApps"
                android:layout_width="0dp"
                android:layout_height="32dp"
                android:layout_weight="1"
                android:src="@android:drawable/ic_menu_sort_by_size"
                app:tint="@color/gray_text" />

        </LinearLayout>

    </androidx.constraintlayout.widget.ConstraintLayout>

    <!-- ENDED LAYOUT (Visible when Finished) -->
    <androidx.constraintlayout.widget.ConstraintLayout
        android:id="@+id/endedLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#000000"
        android:padding="24dp"
        android:visibility="gone">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:gravity="center"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            android:layout_marginBottom="100dp">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Great job!"
                android:textColor="@color/gray_text"
                android:textSize="16sp"
                android:layout_marginBottom="8dp"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Lock has ended"
                android:textColor="@color/orange_accent"
                android:textSize="28sp"
                android:textStyle="bold"
                android:layout_marginBottom="48dp"/>

            <androidx.appcompat.widget.AppCompatButton
                android:id="@+id/btnScheduleNext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Schedule Next Lock"
                android:background="@drawable/bg_segment_container"
                android:textColor="@color/orange_accent"
                android:paddingHorizontal="24dp"
                android:textAllCaps="false"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Locked again at the last set 10 minutes"
                android:textColor="#666666"
                android:textSize="12sp"
                android:layout_marginTop="24dp"/>

        </LinearLayout>

        <androidx.appcompat.widget.AppCompatButton
            android:id="@+id/btnCheck"
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:background="@drawable/bg_button_primary"
            android:text="Check"
            android:textAllCaps="false"
            android:textColor="@color/white"
            android:textSize="18sp"
            android:textStyle="bold"
            app:layout_constraintBottom_toBottomOf="parent"
            android:layout_marginBottom="24dp"/>

    </androidx.constraintlayout.widget.ConstraintLayout>

</androidx.constraintlayout.widget.ConstraintLayout>
